<!-- sidebar -->
<div class="flex h-full w-full">
  <!-- for mobile view -->
  <lucide-icon
    name="align-justify"
    title="Sidebar"
    (click)="toggleSidebar()"
    class="text-blue-900 cursor-pointer block md:hidden"
  ></lucide-icon>

  <!-- Shared Template -->
  <ng-template #sideBarContent>
    <div class="h-full flex flex-col justify-between w-full">
      <div class="w-full flex flex-col p-1">
        <div class="w-full flex justify-between p-1">
          <div
            class="cursor-pointer p-[5px] rounded transition-colors ease-in duration-150 hover:bg-purple-300"
            (click)="toggleSidebar()"
          >
            <lucide-icon
              name="align-justify"
              title="Sidebar"
              class="text-blue-900"
            ></lucide-icon>
          </div>

          @if (isSidebarOpen) {
          <div class="flex gap-x-2">
            <div
              class="cursor-pointer p-[5px] rounded transition-colors ease-in duration-150 hover:bg-purple-300"
            >
              <lucide-icon
                name="search"
                title="Search chats"
                class="text-blue-900"
              ></lucide-icon>
            </div>
            <div
              class="cursor-pointer p-[5px] rounded transition-colors ease-in duration-150 hover:bg-purple-300"
            >
              <app-new-chat></app-new-chat>
            </div>
          </div>
          }
        </div>

        @if (isSidebarOpen) {
        <app-sidebar-content [chatsInfo]="chatsInfo"></app-sidebar-content>
        }
      </div>
    </div>
  </ng-template>

  <!-- Mobile sidebar -->
  <div
    class="fixed top-0 left-0 md:hidden h-full w-[100dvw] bg-gradient-to-b from-purple-200 to-indigo-200 transition-all duration-300 px-4 py-3"
    [ngClass]="{
      'translate-x-0': isSidebarOpen,
      '-translate-x-full': !isSidebarOpen
    }"
  >
    <ng-container *ngTemplateOutlet="sideBarContent"> </ng-container>
  </div>

  <!-- Tablet and Laptop sidebar -->
  <div
    class="hidden md:block sticky top-0 left-0 h-full bg-gradient-to-b from-purple-200 to-indigo-200 transition-all duration-300 px-4 py-3"
    [ngClass]="{
  'md:w-80 ': isSidebarOpen,
  ' md:w-20': !isSidebarOpen,
}"
  >
    <ng-container *ngTemplateOutlet="sideBarContent"> </ng-container>
  </div>
</div>
